Index: frontend/src/app/components/actuacion/actuacion.component.ts
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import {Component, OnInit} from '@angular/core';\r\nimport {FormControl, NgForm} from \"@angular/forms\";\r\nimport {Actuacion} from \"../../models/actuacion\";\r\nimport axios from 'axios';\r\n\r\ndeclare const M: any;\r\n\r\nlet imageUploader;\r\nconst CLOUDINARY_URL = 'https://api.cloudinary.com/v1_1/djlgdcqhg/image/upload'\r\nconst CLOUDINARY_UPLOAD_PRESET = 'rdzzccwc';\r\n@Component({\r\n  selector: 'app-actuacion',\r\n  templateUrl: './actuacion.component.html',\r\n  styleUrls: ['./actuacion.component.css']\r\n})\r\n\r\nexport class ActuacionComponent implements OnInit {\r\n\r\n  ngModel: Actuacion;\r\n  horaIniciov = '';\r\n  horaFinv = '';\r\n  artistas: string[] = [];\r\n  img: string | ArrayBuffer = 'assets/img-not-found.png';\r\n  img2: string | ArrayBuffer = 'assets/img-not-found.png';\r\n  private file1: any;\r\n  private file2: any;\r\n\r\n  constructor() {\r\n    this.ngModel = new Actuacion();\r\n  }\r\n\r\n  ngOnInit() {\r\n    imageUploader = document.getElementById('img-uploader');\r\n    M.AutoInit();\r\n    document.addEventListener('DOMContentLoaded', function () {\r\n      var elems = document.querySelectorAll('.timepicker');\r\n      var instances = M.Timepicker.init(elems, {\r\n        defaultTime: '9:00',\r\n        twelveHour: false,\r\n        i18n: {cancel: 'Cancelar', done: 'Aceptar'}\r\n      });\r\n    });\r\n  }\r\n\r\n  guardarActuacion(actForm: NgForm) {\r\n    console.log(actForm.value);\r\n    console.log(this.horaIniciov);\r\n    console.log(this.horaFinv);\r\n    this.uploadimg(1);\r\n    this.uploadimg(2);\r\n  }\r\n\r\n  addArtistas(artista: HTMLInputElement) {\r\n    if (artista.value != \"\" && artista.value != null) {\r\n      this.artistas.push(artista.value);\r\n      artista.value = \"\";\r\n      console.log(this.artistas);\r\n    }\r\n  }\r\n\r\n  removeArtistas(a: string) {\r\n    for (let i = 0; i < this.artistas.length; i++) {\r\n      if(this.artistas[i] == a){\r\n        this.artistas.splice(i,1);\r\n        console.log(this.artistas);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  onSelectFile(event, number: number) {\r\n    if (event.target.files && event.target.files[0]) {\r\n      switch (number) {\r\n        case 1:\r\n          this.file1 = event.target.files[0];\r\n          break;\r\n        case 2:\r\n          this.file2 = event.target.files[0];\r\n          break;\r\n      }\r\n      var reader = new FileReader();\r\n      reader.readAsDataURL(event.target.files[0]);\r\n      reader.onload = (eventt) => {\r\n        console.log(eventt);\r\n        switch (number) {\r\n          case 1:\r\n            this.img = eventt.target.result;\r\n            break;\r\n          case 2:\r\n            this.img2 = eventt.target.result;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async uploadimg(number: number) {\r\n    let file: any;\r\n    if (number === 1) {\r\n      file = this.file1;\r\n    } else {\r\n      file = this.file2;\r\n    }\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);\r\n\r\n    const res = await axios.post(\r\n      CLOUDINARY_URL,\r\n      formData,\r\n      {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        },\r\n        onUploadProgress(e) {\r\n          let progress = Math.round((e.loaded * 100.0) / e.total);\r\n          console.log(progress);\r\n        }\r\n      }\r\n    );\r\n    console.log(res);\r\n  }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- frontend/src/app/components/actuacion/actuacion.component.ts	(revision fb95eed15f67bd7c63502a93cf8d39f1fb596039)
+++ frontend/src/app/components/actuacion/actuacion.component.ts	(date 1617010256628)
@@ -118,6 +118,6 @@
         }
       }
     );
-    console.log(res);
+    console.log(res.data.url);
   }
 }
